{% extends "base.html" %}
{% block content %}

<div class="ms_album_single_wrapper ms_artist_single">
    <div class="album_single_data">
        <div class="album_single_img">
            <img src="{{ url_for('static', filename=author_single.author_photo) }}" alt="" class="img-fluid">
        </div>
        <div class="album_single_text">
            <h2>{{ author_single.author_name }} <img
                    src="{{ url_for('static', filename='images/svg/Twitter_Verified_Badge.svg') }}" alt=""></h2>
            <p class="singer_name">Astana, Kazakhstan</p>
            <p class="singer_name">5 863 Listenrs per month</p>
            <div class="about_artist">
                Quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor
                in<br> reprehenderit in voluptate velit esse cillum dolor... <a href="#">Read More</a>
            </div>
            <div class="album_btn">
                <a href="#" class="ms_btn play_btn"><span class="play_all"><img
                            src="{{ url_for('static', filename='images/svg/user-check-svgrepo-com.svg') }}"
                            alt="">Follow</span><span class="pause_all"><img
                            src="{{ url_for('static', filename='images/svg/pause_all.svg') }}" alt="">Pause</span></a>
                <a href="#" class="ms_btn"><span class="play_all"><img
                            src="{{ url_for('static', filename='images/svg/black-microphone-14637.svg') }}" alt="">
                        Collaborate</span></a>
            </div>
        </div>
        <div class="album_more_optn ms_more_icon">
            <span><img src="{{ url_for('static', filename='images/svg/more.svg') }}" alt=""></span>
        </div>
        <ul class="more_option">
            <li><a href="#"><span class="opt_icon"><span class="icon icon_fav"></span></span>Add To Favourites</a></li>
            <li><a href="#"><span class="opt_icon"><span class="icon icon_queue"></span></span>Add To Queue</a></li>
            <li><a href="#"><span class="opt_icon"><span class="icon icon_dwn"></span></span>Download Now</a></li>
            <li><a href="#"><span class="opt_icon"><span class="icon icon_playlst"></span></span>Add To Playlist</a>
            </li>
            <li><a href="#"><span class="opt_icon"><span class="icon icon_share"></span></span>Share</a></li>
        </ul>
    </div>
    <!----Song List---->
    <div class="album_inner_list">
        <div class="album_list_wrapper">
            <ul class="album_list_name">
                <li>#</li>
                <li>Song Title</li>
                <li>Artist</li>
                <li class="text-center">Duration</li>
                <li class="text-center">Add To Favourites</li>
                <li class="text-center">More</li>
            </ul>
            {% for music in musics %}
            <ul>
                <li><a href="#"><span class="play_no">{{ loop.index }}</span><span class="play_hover ms_play_icon"
                            musics="{{ musics }}" music_source="{{ music.music_source }}" music_id="{{ music.id }}"
                            artist_name="{{ music.author_name }}" music_title="{{ music.music_title }}"
                            album_img="{{ music.album_img }}"></span></a></li>
                <li><a href="#">{{ music.music_title}}</a></li>
                <li><a href="#">{{ music.author_name }}</a></li>
                <li class="text-center"><a href="#">5:26</a></li>
                {% if current_user.is_authenticated %}
                <li class="text-center"><i
                        class="fv_btn btn text-white fa-heart {{ 'far' if music.is_favourite == None else 'fas' }}"
                        music_id="{{ music.id }}"></i></li>
                {% else %}
                <li class="text-center"><i class="far fa-heart text-white" style="font-size: 24px"></i></li>
                {% endif %}
                <li class="text-center ms_more_icon"><a href="javascript:;"><span
                            class="ms_icon1 ms_active_icon"></span></a>
                    <ul class="more_option">
                        <li><a href="#"><span class="opt_icon"><span class="icon icon_fav"></span></span>Add To
                                Favourites</a></li>
                        <li><a href="#"><span class="opt_icon"><span class="icon icon_queue"></span></span>Add To
                                Queue</a></li>
                        <li><a href="#"><span class="opt_icon"><span class="icon icon_dwn"></span></span>Download
                                Now</a></li>
                        <li><a href="#"><span class="opt_icon"><span class="icon icon_playlst"></span></span>Add To
                                Playlist</a></li>
                        <li><a href="#"><span class="opt_icon"><span class="icon icon_share"></span></span>Share</a>
                        </li>
                    </ul>
                </li>
            </ul>
            {% endfor %}
        </div>
    </div>
    <div class="ms_view_more padder_bottom20">
        <a href="#" class="ms_btn">view more</a>
    </div>
</div>
<div class="ms_featured_slider">
    <div class="ms_heading">
        <h1>Albums</h1>
        <span class="veiw_all"><a href="#">view more</a></span>
    </div>
    <div class="ms_relative_inner">
        <div class="ms_feature_slider swiper-container hello">
            <div class="swiper-wrapper">
                {% for album in albums %}
                <div class="swiper-slide">
                    <div class="ms_rcnt_box">
                        <div class="ms_rcnt_box_img">
                            <img src="{{ url_for('static', filename=album.album_img) }}" alt="">
                            <div class="ms_main_overlay">
                                <div class="ms_box_overlay"></div>
                                <div class="ms_more_icon">
                                    <img src="{{ url_for('static', filename='images/svg/more.svg') }}" alt="">
                                </div>
                                <ul class="more_option">
                                    <li><a href="#"><span class="opt_icon"><span class="icon icon_fav"></span></span>Add
                                            To Favourites</a></li>
                                    <li><a href="#"><span class="opt_icon"><span
                                                    class="icon icon_queue"></span></span>Add To Queue</a></li>
                                    <li><a href="#"><span class="opt_icon"><span
                                                    class="icon icon_dwn"></span></span>Download Now</a></li>
                                    <li><a href="#"><span class="opt_icon"><span
                                                    class="icon icon_playlst"></span></span>Add To Playlist</a></li>
                                    <li><a href="#"><span class="opt_icon"><span
                                                    class="icon icon_share"></span></span>Share</a></li>
                                </ul>
                                <form action="{{ url_for('main.album_single', album_id=album.id) }}" method="GET">
                                    <div class="ms_play_icon">
                                        <button class="btn" style="background-color:transparent"><img
                                                src="{{ url_for('static', filename='images/svg/play.svg') }}"
                                                alt=""></button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="ms_rcnt_box_text">
                            <h3><a href="#">{{ album.album_title }}</a></h3>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        <!-- Add Arrows -->
        <div class="swiper-button-next4 slider_nav_next"></div>
        <div class="swiper-button-prev4 slider_nav_prev"></div>
    </div>
</div>
<div class="ms_featured_slider">
    <div class="ms_heading">
        <h1>Similar Artists</h1>
        <span class="veiw_all"><a href="#">view more</a></span>
    </div>
    <div class="ms_relative_inner">
        <div class="ms_feature_slider swiper-container">
            <div class="swiper-wrapper">
                {% for author_similar in authors_similar %}
                <div class="swiper-slide">
                    <div class="ms_rcnt_box">
                        <div class="ms_rcnt_box_img">
                            <img src="{{ url_for('static', filename=author_similar.author_photo) }}" alt="">
                            <div class="ms_main_overlay">
                                <div class="ms_box_overlay"></div>
                                <div class="ms_more_icon">
                                    <img src="{{ url_for('static', filename='images/svg/more.svg') }}" alt="">
                                </div>
                                <ul class="more_option">
                                    <li><a href="#"><span class="opt_icon"><span class="icon icon_fav"></span></span>Add
                                            To Favourites</a></li>
                                    <li><a href="#"><span class="opt_icon"><span
                                                    class="icon icon_queue"></span></span>Add To Queue</a></li>
                                    <li><a href="#"><span class="opt_icon"><span
                                                    class="icon icon_dwn"></span></span>Download Now</a></li>
                                    <li><a href="#"><span class="opt_icon"><span
                                                    class="icon icon_playlst"></span></span>Add To Playlist</a></li>
                                    <li><a href="#"><span class="opt_icon"><span
                                                    class="icon icon_share"></span></span>Share</a></li>
                                </ul>
                                <form action="{{ url_for('main.artist_single', artist_id=author_similar.id) }}"
                                    method="GET">
                                    <div class="ms_play_icon">
                                        <button class="btn" style="background-color:transparent"><img
                                                src="{{ url_for('static', filename='images/svg/play.svg') }}"
                                                alt=""></button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="ms_rcnt_box_text">
                            <h3><a href="#">{{ author_similar.author_name }}</a></h3>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        <!-- Add Arrows -->
        <div class="swiper-button-next1 slider_nav_next"></div>
        <div class="swiper-button-prev1 slider_nav_prev"></div>
    </div>
</div>
<div class="">
    <script>
        $(document).ready(function () {
            $('.fv_btn').click(function () {
                let el = $(this)
                let action = 'add';
                let firstClass = 'far';
                let secondClass = 'fas';

                if (el.hasClass('fas')) {
                    action = 'remove';
                    firstClass = 'fas';
                    secondClass = 'far';
                }
                $.ajax({
                    type: "POST",
                    url: "/favourites/" + action,
                    data: {
                        music_id: $(this).attr("music_id")
                    },
                    success: function (resp) {
                        el.removeClass(firstClass).addClass(secondClass)
                    },
                    error: function (error) {
                        console.log(error)
                    }
                })
            })
        })
    </script>
</div>
{% endblock %}